#!/bin/bash

# The arguments to this script will be passed directly to `pytest`. Run this script with `--setup-only` to only
# set up the environment without running tests. For interactive development, google how to activate/use virtual env,
# which will be generated by this script in `./venv`.
# Run this script with `--help` to see the command line reference for the testing project itself.

(
  cd "$(dirname "$0")"
  if [ `arch` = "aarch64" ]
  then
    echo "pytests currently is not supported for arm because of unavailable solc package"
    exit 0
  fi
  pip3 install virtualenv
  virtualenv -p python3 venv
  source venv/bin/activate
  pip3 install -r requirements.txt
  python3 -m pytest $@
)
