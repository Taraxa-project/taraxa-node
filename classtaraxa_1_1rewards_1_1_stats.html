<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TARAXA: taraxa::rewards::Stats Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TARAXA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtaraxa_1_1rewards_1_1_stats.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classtaraxa_1_1rewards_1_1_stats-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">taraxa::rewards::Stats Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>class that is managing rewards stats processing and hardforks(intervals changes) So intermediate blocks stats are stored in the vector in data(to restore on the node restart) and full list of interval stats is returned in the end of interval  
 <a href="classtaraxa_1_1rewards_1_1_stats.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="rewards__stats_8hpp_source.html">rewards_stats.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for taraxa::rewards::Stats:</div>
<div class="dyncontent">
<div class="center"><img src="classtaraxa_1_1rewards_1_1_stats__coll__graph.png" border="0" usemap="#ataraxa_1_1rewards_1_1_stats_coll__map" alt="Collaboration graph"/></div>
<map name="ataraxa_1_1rewards_1_1_stats_coll__map" id="ataraxa_1_1rewards_1_1_stats_coll__map">
<area shape="rect" title="class that is managing rewards stats processing and hardforks(intervals changes) So intermediate bloc..." alt="" coords="1068,129,1233,155"/>
<area shape="rect" href="structtaraxa_1_1_hardforks_config.html" title=" " alt="" coords="725,129,903,155"/>
<area shape="poly" title=" " alt="" coords="917,139,1068,139,1068,145,917,145"/>
<area shape="rect" href="namespacetaraxa.html#structtaraxa_1_1_magnolia_hardfork" title=" " alt="" coords="390,5,579,31"/>
<area shape="poly" title=" " alt="" coords="581,31,642,46,702,68,756,97,798,127,795,131,753,102,700,72,640,51,580,36"/>
<area shape="rect" href="namespacetaraxa.html#structtaraxa_1_1_aspen_hardfork" title=" " alt="" coords="400,55,569,80"/>
<area shape="poly" title=" " alt="" coords="580,80,702,105,776,127,775,132,701,110,579,85"/>
<area shape="rect" href="structtaraxa_1_1_ficus_hardfork_config.html" title=" " alt="" coords="383,104,586,129"/>
<area shape="poly" title=" " alt="" coords="600,123,725,133,725,138,600,128"/>
<area shape="rect" href="classdev_1_1_fixed_hash.html" title=" " alt="" coords="5,104,165,129"/>
<area shape="poly" title=" " alt="" coords="179,114,383,114,383,119,179,119"/>
<area shape="rect" href="namespacetaraxa.html#structtaraxa_1_1_cornus_hardfork_config" title=" " alt="" coords="377,153,592,179"/>
<area shape="poly" title=" " alt="" coords="606,164,701,159,751,152,752,157,702,165,606,170"/>
<area shape="rect" href="namespacetaraxa.html#structtaraxa_1_1_soleirolia_hardfork_config" title=" " alt="" coords="389,203,580,243"/>
<area shape="poly" title=" " alt="" coords="593,206,701,183,784,152,786,157,702,189,594,212"/>
<area shape="rect" href="structtaraxa_1_1_cacti_hardfork_config.html" title=" " alt="" coords="383,268,586,293"/>
<area shape="poly" title=" " alt="" coords="575,263,638,246,700,221,755,186,797,153,800,157,758,191,703,226,639,251,576,268"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6a4d974a2a26d6febd198be2fb2db066" id="r_a6a4d974a2a26d6febd198be2fb2db066"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#a6a4d974a2a26d6febd198be2fb2db066">Stats</a> (uint32_t committee_size, const <a class="el" href="structtaraxa_1_1_hardforks_config.html">HardforksConfig</a> &amp;hardforks, std::shared_ptr&lt; <a class="el" href="classtaraxa_1_1_db_storage.html">DbStorage</a> &gt; db, std::function&lt; uint64_t(<a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a>)&gt; &amp;&amp;dpos_eligible_total_vote_count, <a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a> last_blk_num=0)</td></tr>
<tr class="separator:a6a4d974a2a26d6febd198be2fb2db066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d5d8f2e59be8486cdcf6daeb65cb4e" id="r_a35d5d8f2e59be8486cdcf6daeb65cb4e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#a35d5d8f2e59be8486cdcf6daeb65cb4e">processStats</a> (const <a class="el" href="group___p_b_f_t.html#classtaraxa_1_1_period_data">PeriodData</a> &amp;current_blk, const std::vector&lt; <a class="el" href="namespacetaraxa.html#ae64cd164e0402036777a1aab63d2a66f">gas_t</a> &gt; &amp;trxs_gas_used, <a class="el" href="namespacetaraxa.html#a0cd0083754f45af046225376c7cc813a">Batch</a> &amp;write_batch)</td></tr>
<tr class="memdesc:a35d5d8f2e59be8486cdcf6daeb65cb4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">processing passed block and returns stats that should be processed at this block  <br /></td></tr>
<tr class="separator:a35d5d8f2e59be8486cdcf6daeb65cb4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6de3013fe4a9dbbff071bab4d8ce491" id="r_ad6de3013fe4a9dbbff071bab4d8ce491"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#ad6de3013fe4a9dbbff071bab4d8ce491">clear</a> (uint64_t current_period)</td></tr>
<tr class="memdesc:ad6de3013fe4a9dbbff071bab4d8ce491"><td class="mdescLeft">&#160;</td><td class="mdescRight">called on start of new rewards interval. clears blocks_stats_ collection and removes all data saved in db column  <br /></td></tr>
<tr class="separator:ad6de3013fe4a9dbbff071bab4d8ce491"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a58be7a856ae063712e3168b7110ef02c" id="r_a58be7a856ae063712e3168b7110ef02c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#a58be7a856ae063712e3168b7110ef02c">recoverFromDb</a> (<a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a> last_blk_num)</td></tr>
<tr class="memdesc:a58be7a856ae063712e3168b7110ef02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">recover current interval stats from database  <br /></td></tr>
<tr class="separator:a58be7a856ae063712e3168b7110ef02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47268a8f89eeb03af9a978ddf1cc2c94" id="r_a47268a8f89eeb03af9a978ddf1cc2c94"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#a47268a8f89eeb03af9a978ddf1cc2c94">getCurrentDistributionFrequency</a> (uint64_t current_period) const</td></tr>
<tr class="memdesc:a47268a8f89eeb03af9a978ddf1cc2c94"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns rewards distribution frequency for specified period  <br /></td></tr>
<tr class="separator:a47268a8f89eeb03af9a978ddf1cc2c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87f33929689bc48fbf2c6459eebfb22" id="r_ad87f33929689bc48fbf2c6459eebfb22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#ad87f33929689bc48fbf2c6459eebfb22">getBlockStats</a> (const <a class="el" href="group___p_b_f_t.html#classtaraxa_1_1_period_data">PeriodData</a> &amp;current_blk, const std::vector&lt; <a class="el" href="namespacetaraxa.html#ae64cd164e0402036777a1aab63d2a66f">gas_t</a> &gt; &amp;trxs_fees)</td></tr>
<tr class="separator:ad87f33929689bc48fbf2c6459eebfb22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5f886ffe12349d16c6a43936968978" id="r_a3e5f886ffe12349d16c6a43936968978"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#a3e5f886ffe12349d16c6a43936968978">saveBlockStats</a> (uint64_t number, const <a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a> &amp;stats, <a class="el" href="namespacetaraxa.html#a0cd0083754f45af046225376c7cc813a">Batch</a> &amp;write_batch)</td></tr>
<tr class="memdesc:a3e5f886ffe12349d16c6a43936968978"><td class="mdescLeft">&#160;</td><td class="mdescRight">saves stats to database to not lose this data in case of node restart  <br /></td></tr>
<tr class="separator:a3e5f886ffe12349d16c6a43936968978"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a76a2d33a81bb57fd74b4468c42d8a807" id="r_a76a2d33a81bb57fd74b4468c42d8a807"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#a76a2d33a81bb57fd74b4468c42d8a807">kCommitteeSize</a></td></tr>
<tr class="separator:a76a2d33a81bb57fd74b4468c42d8a807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3ea90ef92edb2fb0a6e380ebe922c40" id="r_af3ea90ef92edb2fb0a6e380ebe922c40"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structtaraxa_1_1_hardforks_config.html">HardforksConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#af3ea90ef92edb2fb0a6e380ebe922c40">kHardforksConfig</a></td></tr>
<tr class="separator:af3ea90ef92edb2fb0a6e380ebe922c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7a982983964e588795aca2d8bd8e27" id="r_abf7a982983964e588795aca2d8bd8e27"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classtaraxa_1_1_db_storage.html">DbStorage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#abf7a982983964e588795aca2d8bd8e27">db_</a></td></tr>
<tr class="separator:abf7a982983964e588795aca2d8bd8e27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2cdad256d0ca829bc2fc69fe320f481" id="r_ae2cdad256d0ca829bc2fc69fe320f481"><td class="memItemLeft" align="right" valign="top">const std::function&lt; uint64_t(<a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a>)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#ae2cdad256d0ca829bc2fc69fe320f481">dpos_eligible_total_vote_count_</a></td></tr>
<tr class="separator:ae2cdad256d0ca829bc2fc69fe320f481"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4655cca7130eb3e898fe8373df8c7035" id="r_a4655cca7130eb3e898fe8373df8c7035"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="namespacetaraxa.html#a65a103ca2c7b87e38da64ba76ffe0eac">PbftPeriod</a>, <a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html#a4655cca7130eb3e898fe8373df8c7035">blocks_stats_</a></td></tr>
<tr class="separator:a4655cca7130eb3e898fe8373df8c7035"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>class that is managing rewards stats processing and hardforks(intervals changes) So intermediate blocks stats are stored in the vector in data(to restore on the node restart) and full list of interval stats is returned in the end of interval </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6a4d974a2a26d6febd198be2fb2db066" name="a6a4d974a2a26d6febd198be2fb2db066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a4d974a2a26d6febd198be2fb2db066">&#9670;&#160;</a></span>Stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">taraxa::rewards::Stats::Stats </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>committee_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtaraxa_1_1_hardforks_config.html">HardforksConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>hardforks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classtaraxa_1_1_db_storage.html">DbStorage</a> &gt;&#160;</td>
          <td class="paramname"><em>db</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; uint64_t(<a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a>)&gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>dpos_eligible_total_vote_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a>&#160;</td>
          <td class="paramname"><em>last_blk_num</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad6de3013fe4a9dbbff071bab4d8ce491" name="ad6de3013fe4a9dbbff071bab4d8ce491"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6de3013fe4a9dbbff071bab4d8ce491">&#9670;&#160;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void taraxa::rewards::Stats::clear </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>current_period</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>called on start of new rewards interval. clears blocks_stats_ collection and removes all data saved in db column </p>

</div>
</div>
<a id="ad87f33929689bc48fbf2c6459eebfb22" name="ad87f33929689bc48fbf2c6459eebfb22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87f33929689bc48fbf2c6459eebfb22">&#9670;&#160;</a></span>getBlockStats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a> taraxa::rewards::Stats::getBlockStats </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___p_b_f_t.html#classtaraxa_1_1_period_data">PeriodData</a> &amp;&#160;</td>
          <td class="paramname"><em>current_blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespacetaraxa.html#ae64cd164e0402036777a1aab63d2a66f">gas_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>trxs_fees</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a47268a8f89eeb03af9a978ddf1cc2c94" name="a47268a8f89eeb03af9a978ddf1cc2c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47268a8f89eeb03af9a978ddf1cc2c94">&#9670;&#160;</a></span>getCurrentDistributionFrequency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t taraxa::rewards::Stats::getCurrentDistributionFrequency </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>current_period</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns rewards distribution frequency for specified period </p>

</div>
</div>
<a id="a35d5d8f2e59be8486cdcf6daeb65cb4e" name="a35d5d8f2e59be8486cdcf6daeb65cb4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35d5d8f2e59be8486cdcf6daeb65cb4e">&#9670;&#160;</a></span>processStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a> &gt; taraxa::rewards::Stats::processStats </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group___p_b_f_t.html#classtaraxa_1_1_period_data">PeriodData</a> &amp;&#160;</td>
          <td class="paramname"><em>current_blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespacetaraxa.html#ae64cd164e0402036777a1aab63d2a66f">gas_t</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>trxs_gas_used</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetaraxa.html#a0cd0083754f45af046225376c7cc813a">Batch</a> &amp;&#160;</td>
          <td class="paramname"><em>write_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>processing passed block and returns stats that should be processed at this block </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_blk</td><td>block to process </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vector&lt;BlockStats&gt; that should be processed at current block </dd></dl>

</div>
</div>
<a id="a58be7a856ae063712e3168b7110ef02c" name="a58be7a856ae063712e3168b7110ef02c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58be7a856ae063712e3168b7110ef02c">&#9670;&#160;</a></span>recoverFromDb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void taraxa::rewards::Stats::recoverFromDb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a>&#160;</td>
          <td class="paramname"><em>last_blk_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>recover current interval stats from database </p>

</div>
</div>
<a id="a3e5f886ffe12349d16c6a43936968978" name="a3e5f886ffe12349d16c6a43936968978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e5f886ffe12349d16c6a43936968978">&#9670;&#160;</a></span>saveBlockStats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void taraxa::rewards::Stats::saveBlockStats </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a> &amp;&#160;</td>
          <td class="paramname"><em>stats</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacetaraxa.html#a0cd0083754f45af046225376c7cc813a">Batch</a> &amp;&#160;</td>
          <td class="paramname"><em>write_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>saves stats to database to not lose this data in case of node restart </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4655cca7130eb3e898fe8373df8c7035" name="a4655cca7130eb3e898fe8373df8c7035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4655cca7130eb3e898fe8373df8c7035">&#9670;&#160;</a></span>blocks_stats_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="namespacetaraxa.html#a65a103ca2c7b87e38da64ba76ffe0eac">PbftPeriod</a>, <a class="el" href="classtaraxa_1_1rewards_1_1_block_stats.html">BlockStats</a>&gt; taraxa::rewards::Stats::blocks_stats_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abf7a982983964e588795aca2d8bd8e27" name="abf7a982983964e588795aca2d8bd8e27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf7a982983964e588795aca2d8bd8e27">&#9670;&#160;</a></span>db_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classtaraxa_1_1_db_storage.html">DbStorage</a>&gt; taraxa::rewards::Stats::db_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae2cdad256d0ca829bc2fc69fe320f481" name="ae2cdad256d0ca829bc2fc69fe320f481"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2cdad256d0ca829bc2fc69fe320f481">&#9670;&#160;</a></span>dpos_eligible_total_vote_count_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::function&lt;uint64_t(<a class="el" href="namespacetaraxa.html#a376e12232232a6437159f77ba13e3bf2">EthBlockNumber</a>)&gt; taraxa::rewards::Stats::dpos_eligible_total_vote_count_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a76a2d33a81bb57fd74b4468c42d8a807" name="a76a2d33a81bb57fd74b4468c42d8a807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a2d33a81bb57fd74b4468c42d8a807">&#9670;&#160;</a></span>kCommitteeSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t taraxa::rewards::Stats::kCommitteeSize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af3ea90ef92edb2fb0a6e380ebe922c40" name="af3ea90ef92edb2fb0a6e380ebe922c40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3ea90ef92edb2fb0a6e380ebe922c40">&#9670;&#160;</a></span>kHardforksConfig</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structtaraxa_1_1_hardforks_config.html">HardforksConfig</a> taraxa::rewards::Stats::kHardforksConfig</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>libraries/core_libs/consensus/include/rewards/<a class="el" href="rewards__stats_8hpp_source.html">rewards_stats.hpp</a></li>
<li>libraries/core_libs/consensus/src/rewards/<a class="el" href="rewards__stats_8cpp.html">rewards_stats.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetaraxa.html">taraxa</a></li><li class="navelem"><a class="el" href="namespacetaraxa_1_1rewards.html">rewards</a></li><li class="navelem"><a class="el" href="classtaraxa_1_1rewards_1_1_stats.html">Stats</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
