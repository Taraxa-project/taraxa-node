<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TARAXA: ExpirationBlockNumberCache&lt; Key &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TARAXA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_expiration_block_number_cache.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_expiration_block_number_cache-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ExpirationBlockNumberCache&lt; Key &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="util_8hpp_source.html">util.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for ExpirationBlockNumberCache&lt; Key &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="class_expiration_block_number_cache__coll__graph.png" border="0" usemap="#a_expiration_block_number_cache_3_01_key_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="a_expiration_block_number_cache_3_01_key_01_4_coll__map" id="a_expiration_block_number_cache_3_01_key_01_4_coll__map">
<area shape="rect" title=" " alt="" coords="5,80,221,121"/>
<area shape="rect" href="class_expiration_cache.html" title=" " alt="" coords="22,5,205,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3224b5c90af2a62e87b304333befd126"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_block_number_cache.html#a3224b5c90af2a62e87b304333befd126">ExpirationBlockNumberCache</a> (uint32_t max_size, uint32_t delete_step, uint32_t blocks_to_keep)</td></tr>
<tr class="separator:a3224b5c90af2a62e87b304333befd126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac70712f5c343aa966af2c9170a74256c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_block_number_cache.html#ac70712f5c343aa966af2c9170a74256c">insert</a> (Key const &amp;key, uint64_t block_number)</td></tr>
<tr class="memdesc:ac70712f5c343aa966af2c9170a74256c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts key into the cache map. In case provided key is already in cache, only shared lock is acquired and function returns false. This means insert does not need to be used together with <a class="el" href="class_expiration_cache.html#a373866690d674639d5a5f711c5e6d2ee">count()</a> to save the performance by not acquiring unique lock.  <a href="class_expiration_block_number_cache.html#ac70712f5c343aa966af2c9170a74256c">More...</a><br /></td></tr>
<tr class="separator:ac70712f5c343aa966af2c9170a74256c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80bdc770250be61ffc48494597fb271f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_block_number_cache.html#a80bdc770250be61ffc48494597fb271f">clear</a> ()</td></tr>
<tr class="separator:a80bdc770250be61ffc48494597fb271f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_expiration_cache"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_expiration_cache')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_expiration_cache.html">ExpirationCache&lt; Key &gt;</a></td></tr>
<tr class="memitem:a7c33bf9a8cb52e6370536fa954e6425c inherit pub_methods_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#a7c33bf9a8cb52e6370536fa954e6425c">ExpirationCache</a> (uint32_t max_size, uint32_t delete_step)</td></tr>
<tr class="separator:a7c33bf9a8cb52e6370536fa954e6425c inherit pub_methods_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32582336ae6a2469de07ee409e797848 inherit pub_methods_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#a32582336ae6a2469de07ee409e797848">insert</a> (Key const &amp;key)</td></tr>
<tr class="memdesc:a32582336ae6a2469de07ee409e797848 inherit pub_methods_class_expiration_cache"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts key into the cache map. In case provided key is already in cache, only shared lock is acquired and function returns false. This means insert does not need to be used together with <a class="el" href="class_expiration_cache.html#a373866690d674639d5a5f711c5e6d2ee">count()</a> to save the performance by not acquiring unique lock.  <a href="class_expiration_cache.html#a32582336ae6a2469de07ee409e797848">More...</a><br /></td></tr>
<tr class="separator:a32582336ae6a2469de07ee409e797848 inherit pub_methods_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa669b6e8373a60d02efc12ff67efa1b4 inherit pub_methods_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#aa669b6e8373a60d02efc12ff67efa1b4">contains</a> (Key const &amp;key) const</td></tr>
<tr class="separator:aa669b6e8373a60d02efc12ff67efa1b4 inherit pub_methods_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54091d7a34e5e1ab098390c400d1557 inherit pub_methods_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#ab54091d7a34e5e1ab098390c400d1557">erase</a> (Key const &amp;key)</td></tr>
<tr class="separator:ab54091d7a34e5e1ab098390c400d1557 inherit pub_methods_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a373866690d674639d5a5f711c5e6d2ee inherit pub_methods_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#a373866690d674639d5a5f711c5e6d2ee">count</a> (Key const &amp;key) const</td></tr>
<tr class="separator:a373866690d674639d5a5f711c5e6d2ee inherit pub_methods_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5702e7f844bd5f8b2057c5484f3244e inherit pub_methods_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#ae5702e7f844bd5f8b2057c5484f3244e">size</a> () const</td></tr>
<tr class="separator:ae5702e7f844bd5f8b2057c5484f3244e inherit pub_methods_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925a7b67254e19995dfaf40ec05e5dc4 inherit pub_methods_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#a925a7b67254e19995dfaf40ec05e5dc4">clear</a> ()</td></tr>
<tr class="separator:a925a7b67254e19995dfaf40ec05e5dc4 inherit pub_methods_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa03e0cad731e5f6a70dc649f6d52fcac"><td class="memItemLeft" align="right" valign="top">std::deque&lt; std::pair&lt; Key, uint64_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_block_number_cache.html#aa03e0cad731e5f6a70dc649f6d52fcac">block_expiration_</a></td></tr>
<tr class="separator:aa03e0cad731e5f6a70dc649f6d52fcac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc62a8105cf3c05f4013a603ac7ba2b5"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_block_number_cache.html#abc62a8105cf3c05f4013a603ac7ba2b5">kBlocksToKeep</a></td></tr>
<tr class="separator:abc62a8105cf3c05f4013a603ac7ba2b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71b5bfee63646ba95e3eca47567cc49"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_block_number_cache.html#ad71b5bfee63646ba95e3eca47567cc49">last_block_number_</a> = 0</td></tr>
<tr class="separator:ad71b5bfee63646ba95e3eca47567cc49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_class_expiration_cache"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_class_expiration_cache')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="class_expiration_cache.html">ExpirationCache&lt; Key &gt;</a></td></tr>
<tr class="memitem:adf4f2fb0ac2d0d2b33b288bab73b1471 inherit pro_attribs_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; Key &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#adf4f2fb0ac2d0d2b33b288bab73b1471">cache_</a></td></tr>
<tr class="separator:adf4f2fb0ac2d0d2b33b288bab73b1471 inherit pro_attribs_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4382e32c27b2303bcd29f8b575546124 inherit pro_attribs_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#a4382e32c27b2303bcd29f8b575546124">kMaxSize</a></td></tr>
<tr class="separator:a4382e32c27b2303bcd29f8b575546124 inherit pro_attribs_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e1d6373eb6b0709cfcde3ce534fa39f inherit pro_attribs_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#a0e1d6373eb6b0709cfcde3ce534fa39f">kDeleteStep</a></td></tr>
<tr class="separator:a0e1d6373eb6b0709cfcde3ce534fa39f inherit pro_attribs_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ff85cac595e5d0c592ff2b3a3fb191 inherit pro_attribs_class_expiration_cache"><td class="memItemLeft" align="right" valign="top">std::shared_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_expiration_cache.html#a51ff85cac595e5d0c592ff2b3a3fb191">mtx_</a></td></tr>
<tr class="separator:a51ff85cac595e5d0c592ff2b3a3fb191 inherit pro_attribs_class_expiration_cache"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3224b5c90af2a62e87b304333befd126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3224b5c90af2a62e87b304333befd126">&#9670;&nbsp;</a></span>ExpirationBlockNumberCache()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Key &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a>&lt; Key &gt;::<a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a> </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>delete_step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>blocks_to_keep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a80bdc770250be61ffc48494597fb271f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80bdc770250be61ffc48494597fb271f">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Key &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a>&lt; Key &gt;::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac70712f5c343aa966af2c9170a74256c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac70712f5c343aa966af2c9170a74256c">&#9670;&nbsp;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Key &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a>&lt; Key &gt;::insert </td>
          <td>(</td>
          <td class="paramtype">Key const &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>block_number</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts key into the cache map. In case provided key is already in cache, only shared lock is acquired and function returns false. This means insert does not need to be used together with <a class="el" href="class_expiration_cache.html#a373866690d674639d5a5f711c5e6d2ee">count()</a> to save the performance by not acquiring unique lock. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td></td></tr>
    <tr><td class="paramname">block_number</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if actual insertion took place, otherwise false </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa03e0cad731e5f6a70dc649f6d52fcac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa03e0cad731e5f6a70dc649f6d52fcac">&#9670;&nbsp;</a></span>block_expiration_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Key &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::deque&lt;std::pair&lt;Key, uint64_t&gt; &gt; <a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a>&lt; Key &gt;::block_expiration_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abc62a8105cf3c05f4013a603ac7ba2b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc62a8105cf3c05f4013a603ac7ba2b5">&#9670;&nbsp;</a></span>kBlocksToKeep</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Key &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t <a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a>&lt; Key &gt;::kBlocksToKeep</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad71b5bfee63646ba95e3eca47567cc49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad71b5bfee63646ba95e3eca47567cc49">&#9670;&nbsp;</a></span>last_block_number_</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Key &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a>&lt; Key &gt;::last_block_number_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>libraries/common/include/common/<a class="el" href="util_8hpp_source.html">util.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_expiration_block_number_cache.html">ExpirationBlockNumberCache</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
